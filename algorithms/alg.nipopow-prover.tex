\begin{algorithm}
\begin{small}
    \caption{\label{alg.nipopow-prover}The \textsf{Prove} algorithm
    for the NIPoPoW protocol in a soft fork}
    \begin{algorithmic}[1]
        \Function{\sf Prove$_{m,k}$}{$\chain$}
            \Let{B}{\chain[0]}
            \Comment{Genesis}
            \For{$\mu = |\chain[-k-1].\mathsf{interlink}|$ down to $0$}
                \Let{\alpha}{\chain[{:}{-k}]\{B{:}\}\upchain^\mu}
                \Let{\pi}{\pi \cup \alpha}
                \If{$m < |\alpha|$}
                    \Let{B}{\alpha[-m]}
                \EndIf
            \EndFor
            \Let{\chi}{\chain[-k{:}]}
            \State\Return{$\pi\chi$}
        \EndFunction
    \vskip8pt
    \end{algorithmic}
\end{small}
\end{algorithm}
